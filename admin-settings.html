<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Param√®tres - Admin Nexio</title>
    <link rel="stylesheet" href="css/store.css">
</head>
<body>
    <div class="admin-dashboard">
        <aside class="admin-sidebar">
            <div class="admin-logo">üõçÔ∏è Nexio Admin</div>
            <nav class="admin-nav">
                <a href="admin-dashboard.html" class="admin-nav-link">üìä Tableau de bord</a>
                <a href="admin-products.html" class="admin-nav-link">üì¶ Produits</a>
                <a href="admin-orders.html" class="admin-nav-link">üìã Commandes</a>
                <a href="admin-customers.html" class="admin-nav-link">üë• Clients</a>
                <a href="admin-settings.html" class="admin-nav-link active">‚öôÔ∏è Param√®tres</a>
            </nav>
            <button class="btn-logout" onclick="logout()">üö™ D√©connexion</button>
        </aside>

        <main class="admin-main">
            <div class="admin-header">
                <h1>Param√®tres</h1>
            </div>

            <div class="settings-grid-admin">
                <!-- Informations boutique -->
                <div class="admin-card">
                    <h2>Informations de la boutique</h2>
                    <form class="admin-form" onsubmit="saveShopInfo(event)">
                        <div class="form-group">
                            <label>Nom de la boutique</label>
                            <input type="text" id="shopName" value="Nexio">
                        </div>
                        <div class="form-group">
                            <label>Email de contact</label>
                            <input type="email" id="shopEmail" value="contact@nexio.fr">
                        </div>
                        <div class="form-group">
                            <label>T√©l√©phone</label>
                            <input type="tel" id="shopPhone" value="07 68 44 40 51">
                        </div>
                        <div class="form-group">
                            <label>Adresse</label>
                            <textarea id="shopAddress" rows="2">Lyon, France</textarea>
                        </div>
                        <button type="submit" class="btn-submit">Enregistrer</button>
                    </form>
                </div>

                <!-- Param√®tres livraison -->
                <div class="admin-card">
                    <h2>Livraison</h2>
                    <form class="admin-form" onsubmit="saveShipping(event)">
                        <div class="form-group">
                            <label>Livraison gratuite √† partir de</label>
                            <input type="number" id="freeShippingThreshold" value="50"> ‚Ç¨
                        </div>
                        <div class="form-group">
                            <label>Frais de port standards</label>
                            <input type="number" id="shippingCost" value="0"> ‚Ç¨
                        </div>
                        <div class="form-group">
                            <label>D√©lai de livraison</label>
                            <input type="text" id="deliveryTime" value="5-7 jours">
                        </div>
                        <button type="submit" class="btn-submit">Enregistrer</button>
                    </form>
                </div>

                <!-- Notifications -->
                <div class="admin-card">
                    <h2>Notifications</h2>
                    <div class="notification-settings">
                        <label class="checkbox-label-admin">
                            <input type="checkbox" checked>
                            <span>Email lors de nouvelle commande</span>
                        </label>
                        <label class="checkbox-label-admin">
                            <input type="checkbox" checked>
                            <span>Email stock faible</span>
                        </label>
                        <label class="checkbox-label-admin">
                            <input type="checkbox">
                            <span>Notifications push</span>
                        </label>
                        <label class="checkbox-label-admin">
                            <input type="checkbox" checked>
                            <span>Rapport hebdomadaire</span>
                        </label>
                    </div>
                    <button class="btn-submit" onclick="alert('‚úÖ Pr√©f√©rences enregistr√©es')">Enregistrer</button>
                </div>

                <!-- S√©curit√© -->
                <div class="admin-card">
                    <h2>S√©curit√©</h2>
                    <form class="admin-form" onsubmit="changePassword(event)">
                        <div class="form-group">
                            <label>Mot de passe actuel</label>
                            <input type="password" id="currentPassword">
                        </div>
                        <div class="form-group">
                            <label>Nouveau mot de passe</label>
                            <input type="password" id="newPassword">
                        </div>
                        <div class="form-group">
                            <label>Confirmer le mot de passe</label>
                            <input type="password" id="confirmPassword">
                        </div>
                        <button type="submit" class="btn-submit">Changer le mot de passe</button>
                    </form>
                    <div class="security-info">
                        <p>üîí Derni√®re connexion : 04/02/2025 √† 14:32</p>
                        <p>üì± Authentification √† deux facteurs : <span class="badge-warning">D√©sactiv√©e</span></p>
                    </div>
                </div>

                <!-- Base de donn√©es -->
                <div class="admin-card">
                    <h2>Base de donn√©es</h2>
                    <div class="database-actions">
                        <button class="btn-secondary-admin" onclick="exportData()">üì• Exporter les donn√©es</button>
                        <button class="btn-secondary-admin" onclick="importData()">üì§ Importer des donn√©es</button>
                        <button class="btn-danger-admin" onclick="resetData()">üóëÔ∏è R√©initialiser tout</button>
                    </div>
                    <div class="database-info">
                        <p>Produits : <strong id="dbProducts">0</strong></p>
                        <p>Commandes : <strong id="dbOrders">0</strong></p>
                        <p>Clients : <strong id="dbCustomers">0</strong></p>
                    </div>
                </div>

                <!-- Apparence -->
                <div class="admin-card">
                    <h2>Apparence</h2>
                    <div class="appearance-settings">
                        <div class="form-group">
                            <label>Couleur primaire</label>
                            <input type="color" value="#2563eb">
                        </div>
                        <div class="form-group">
                            <label>Couleur secondaire</label>
                            <input type="color" value="#7c3aed">
                        </div>
                        <label class="checkbox-label-admin">
                            <input type="checkbox" checked>
                            <span>Afficher les promotions</span>
                        </label>
                        <label class="checkbox-label-admin">
                            <input type="checkbox" checked>
                            <span>Afficher la newsletter</span>
                        </label>
                    </div>
                    <button class="btn-submit" onclick="alert('‚úÖ Apparence mise √† jour')">Enregistrer</button>
                </div>
            </div>
        </main>
    </div>

    <script>
    if (!localStorage.getItem('adminAuth')) {
        window.location.href = 'admin-login.html';
    }

    function saveShopInfo(e) {
        e.preventDefault();
        alert('‚úÖ Informations de la boutique enregistr√©es !');
    }

    function saveShipping(e) {
        e.preventDefault();
        alert('‚úÖ Param√®tres de livraison enregistr√©s !');
    }

    function changePassword(e) {
        e.preventDefault();
        const current = document.getElementById('currentPassword').value;
        const newPass = document.getElementById('newPassword').value;
        const confirm = document.getElementById('confirmPassword').value;

        if (newPass !== confirm) {
            alert('‚ùå Les mots de passe ne correspondent pas');
            return;
        }
        alert('‚úÖ Mot de passe chang√© avec succ√®s !');
        e.target.reset();
    }

    function exportData() {
        const data = {
            products: JSON.parse(localStorage.getItem('adminProducts') || '[]'),
            orders: JSON.parse(localStorage.getItem('adminOrders') || '[]')
        };
        const dataStr = JSON.stringify(data, null, 2);
        const dataBlob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url;
        link.download = 'nexio-export-' + new Date().toISOString().split('T')[0] + '.json';
        link.click();
        alert('‚úÖ Donn√©es export√©es !');
    }

    function importData() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        input.onchange = (e) => {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onload = (event) => {
                try {
                    const data = JSON.parse(event.target.result);
                    if (data.products) localStorage.setItem('adminProducts', JSON.stringify(data.products));
                    if (data.orders) localStorage.setItem('adminOrders', JSON.stringify(data.orders));
                    alert('‚úÖ Donn√©es import√©es ! Rechargez la page.');
                } catch (err) {
                    alert('‚ùå Erreur lors de l\'import');
                }
            };
            reader.readAsText(file);
        };
        input.click();
    }

    function resetData() {
        if (confirm('‚ö†Ô∏è ATTENTION : Cela va supprimer TOUTES les donn√©es (produits, commandes). Continuer ?')) {
            if (confirm('√ätes-vous VRAIMENT s√ªr ? Cette action est irr√©versible !')) {
                localStorage.removeItem('adminProducts');
                localStorage.removeItem('adminOrders');
                alert('‚úÖ Toutes les donn√©es ont √©t√© supprim√©es. Rechargez la page.');
            }
        }
    }

    function updateDBInfo() {
        const products = JSON.parse(localStorage.getItem('adminProducts') || '[]');
        const orders = JSON.parse(localStorage.getItem('adminOrders') || '[]');
        document.getElementById('dbProducts').textContent = products.length;
        document.getElementById('dbOrders').textContent = orders.length;
        document.getElementById('dbCustomers').textContent = '5';
    }

    function logout() {
        localStorage.removeItem('adminAuth');
        window.location.href = 'admin-login.html';
    }

    updateDBInfo();
    </script>
</body>
</html>
